"use strict";(self.webpackChunk_xivanalysis_client=self.webpackChunk_xivanalysis_client||[]).push([[2806],{17982:function(e,t,i){i.d(t,{k:function(){return O}});var a,n,s,o,r,l,c,d,u,h=i(23257),m=i(68420),v=i(27344),f=i(5281),p=i(90306),g=i(50596),I=i(300),A=i(77766),w=i.n(A),y=i(2991),E=i.n(y),C=i(20116),Z=i.n(C),T=i(28683),x=i(74489),R=i(76704),S=i(61806),N=i(73947),k=i(56611),O=(a=Reflect.metadata("design:type",N.V),n=Reflect.metadata("design:type",k.TY),s=Reflect.metadata("design:type",S.E),u=d=function(e){(0,p.Z)(i,e);var t=(0,g.Z)(i);function i(){var e,a;(0,m.Z)(this,i);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return a=t.call.apply(t,w()(e=[this]).call(e,s)),(0,h.Z)(a,"data",r,(0,f.Z)(a)),(0,h.Z)(a,"timeline",l,(0,f.Z)(a)),(0,h.Z)(a,"actionTimeline",c,(0,f.Z)(a)),a.timelineGroupName="Pet",a.timelineSummonAction=void 0,a.timelineAutosName="Autos",a.timelineCommandsName="Commands",a.canPetBeCommanded=!1,a.autoCasts=[],a.commandCasts=[],a}return(0,v.Z)(i,[{key:"isCommandedEvent",value:function(e){return!1}},{key:"initialise",value:function(){var e,t,i=this,a=E()(e=Z()(t=this.parser.pull.actors).call(t,(function(e){return null!=e.owner&&e.owner.id===i.parser.actor.id}))).call(e,(function(e){return e.id}));this.addEventHook((0,x.hX)().type("action").source((0,x.kw)(a)),this.onCast),this.addEventHook("complete",this.onComplete)}},{key:"onCast",value:function(e){this.isCommandedEvent(e)?this.commandCasts.push(e):this.autoCasts.push(e)}},{key:"onComplete",value:function(){var e;if(this.canPetBeCommanded){var t=this.timeline.addRow(new k.e2({label:this.timelineGroupName,order:-98}));e=t.addRow(new k.e2({label:this.timelineAutosName,order:1}));var i=t.addRow(new k.e2({label:this.timelineCommandsName,order:2}));this.addCastsToRow(i,this.commandCasts)}else if(null!=this.timelineSummonAction){var a=this.data.getAction(this.timelineSummonAction);if(null==a)throw new Error("Timeline summon action set to an invalid action ID");e=this.actionTimeline.getRow(a).addRow(new k.e2({label:this.timelineGroupName,order:-98}))}else e=this.timeline.addRow(new k.e2({label:this.timelineGroupName,order:-98}));this.addCastsToRow(e,this.autoCasts)}},{key:"addCastsToRow",value:function(e,t){var i=this;t.forEach((function(t){var a=i.data.getAction(t.action);if(null!=a){var n=t.timestamp-i.parser.pull.timestamp;e.addItem(new k.tC({action:a,start:n,end:n}))}}))}}]),i}(T.qk),d.handle="pettimeline",o=u,r=(0,I.Z)(o.prototype,"data",[R.I,a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.data}}),l=(0,I.Z)(o.prototype,"timeline",[R.I,n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.timeline}}),c=(0,I.Z)(o.prototype,"actionTimeline",[R.I,s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.actionTimeline}}),o)},45715:function(e,t,i){i.d(t,{x:function(){return Y}});var a,n,s,o,r,l,c,d,u,h,m,v=i(41420),f=i(97530),p=i(23257),g=i(68420),I=i(27344),A=i(5281),w=i(90306),y=i(50596),E=i(300),C=i(77766),Z=i.n(C),T=i(20116),x=i.n(T),R=i(2991),S=i.n(R),N=i(86359),k=i(40090),O=i(71370),b=i(84626),j=i(28683),G=i(74489),H=i(76704),_=i(8510),D=i(73947),P=i(90577),L=i(52250),U=(i(67294),i(30919)),W=i(40753),M=i(85893),B={0:2,1e3:1,2500:0},F={1:L.bI.MEDIUM,5:L.bI.MAJOR},Y=(a=Reflect.metadata("design:type",_.Z),n=Reflect.metadata("design:type",D.V),s=Reflect.metadata("design:type",P.I),o=Reflect.metadata("design:type",L.ZP),m=h=function(e){(0,w.Z)(i,e);var t=(0,y.Z)(i);function i(){var e,a;(0,g.Z)(this,i);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return a=t.call.apply(t,Z()(e=[this]).call(e,s)),(0,p.Z)(a,"castTime",l,(0,A.Z)(a)),(0,p.Z)(a,"data",c,(0,A.Z)(a)),(0,p.Z)(a,"invulnerability",d,(0,A.Z)(a)),(0,p.Z)(a,"suggestions",u,(0,A.Z)(a)),a.suggestionIcon="https://xivapi.com/i/001000/001785.png",a.moduleLink=(0,M.jsx)("a",{style:{cursor:"pointer"},onClick:function(){return a.parser.scrollTo(i.handle)},children:(0,M.jsx)(k.Z,{message:i.title})}),a.suggestionContent=(0,M.jsx)(N.Trans,{id:"core.weaving.content",defaults:"Avoid weaving more actions than you have time for in a single GCD window. Doing so will delay your next GCD, reducing possible uptime. Check the {0} module below for more detailed analysis.",values:{0:a.moduleLink}}),a.severity=F,a.weaves=[],a.ongoingCastEvent=void 0,a.leadingGcdEvent=void 0,a.trailingGcdEvent=void 0,a.badWeaves=[],a}return(0,I.Z)(i,[{key:"initialise",value:function(){var e=(0,G.hX)().source(this.parser.actor.id);this.addEventHook(e.type("prepare"),this.onBeginCast),this.addEventHook(e.type("action"),this.onCast),this.addEventHook((0,G.hX)().type("complete"),this.onComplete),this.addEventHook((0,G.hX)().type("death"),this.clearWeave)}},{key:"onBeginCast",value:function(e){this.ongoingCastEvent=e}},{key:"onCast",value:function(e){var t=this.data.getAction(e.action);t&&!t.autoAttack&&(this.isOgcd(t)?this.weaves.push(e):(this.ongoingCastEvent&&this.ongoingCastEvent.action===t.id?this.trailingGcdEvent=(0,f.Z)((0,f.Z)({},e),{},{timestamp:this.ongoingCastEvent.timestamp}):this.trailingGcdEvent=e,this.ongoingCastEvent=void 0,this.saveIfBad(),this.leadingGcdEvent=this.trailingGcdEvent,this.weaves=[]))}},{key:"onComplete",value:function(){this.leadingGcdEvent&&this.saveIfBad(),this.suggestions.add(new L.eg({icon:this.suggestionIcon,content:this.suggestionContent,why:(0,M.jsx)(N.Trans,{id:"core.weaving.why",defaults:"{0, plural, =1 {# instance of incorrect weaving} other {# instances of incorrect weaving}}",values:{0:this.badWeaves.length}}),tiers:this.severity,value:this.badWeaves.length}))}},{key:"saveIfBad",value:function(){var e,t;if(null!=this.trailingGcdEvent){var i=null!==(e=null===(t=this.leadingGcdEvent)||void 0===t?void 0:t.timestamp)&&void 0!==e?e:this.parser.pull.timestamp,a=this.trailingGcdEvent.timestamp-i-this.invulnerability.getDuration({start:i,end:this.trailingGcdEvent.timestamp}),n={leadingGcdEvent:this.leadingGcdEvent,trailingGcdEvent:this.trailingGcdEvent,gcdTimeDiff:a,weaves:this.weaves};0!==n.weaves.length&&this.isBadWeave(n)&&this.badWeaves.push(n)}}},{key:"isOgcd",value:function(e){return!e.onGcd&&!e.autoAttack}},{key:"isBadWeave",value:function(e){var t,i,a=this,n=x()(t=e.weaves).call(t,(function(e){return!a.invulnerability.isActive({timestamp:e.timestamp,types:["untargetable"]})&&e.timestamp>=a.parser.pull.timestamp})).length,s=null!==(i=null!=e.leadingGcdEvent?this.castTime.recastForEvent(e.leadingGcdEvent):void 0)&&void 0!==i?i:b.b;return e.gcdTimeDiff>s&&n>this.getMaxWeaves(e)}},{key:"clearWeave",value:function(){this.weaves.length>0&&this.saveIfBad(),this.weaves=[],this.leadingGcdEvent=void 0}},{key:"getMaxWeaves",value:function(e){var t,i;if(null==e.leadingGcdEvent)return 2;var a=this.castTime.forEvent(e.leadingGcdEvent);return null==a?2:(null!==(t=(0,W.CL)(B,a))&&void 0!==t?t:2)-((null!==(i=this.castTime.recastForEvent(e.leadingGcdEvent))&&void 0!==i?i:b.b)<1800?1:0)}},{key:"output",value:function(){var e,t=this;if(0===this.badWeaves.length)return!1;var i=S()(e=this.badWeaves).call(e,(function(e){var i,a,n,s,o;return{key:null!==(i=null===(a=e.leadingGcdEvent)||void 0===a?void 0:a.timestamp)&&void 0!==i?i:t.parser.pull.timestamp,title:{content:(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)("strong",{children:t.parser.formatEpochTimestamp(null!==(n=null===(s=e.leadingGcdEvent)||void 0===s?void 0:s.timestamp)&&void 0!==n?n:t.parser.pull.timestamp)})," - ",(0,M.jsx)(N.Trans,{id:"core.weaving.panel-count",defaults:"{0, plural, =1 {# weave} other {# weaves}}",values:{0:e.weaves.length}})," (",t.parser.formatDuration(e.gcdTimeDiff)," ",(0,M.jsx)(N.Trans,{id:"core.weaving.between-gcds",defaults:"between GCDs"}),")"]})},content:{content:(0,M.jsx)(O.Z,{events:Z()(o=[]).call(o,(0,v.Z)(null!=e.leadingGcdEvent?[e.leadingGcdEvent]:[]),(0,v.Z)(e.weaves))})}}}));return(0,M.jsx)(U.Z,{exclusive:!1,panels:i,styled:!0,fluid:!0})}}]),i}(j.qk),h.handle="weaving",h.title={id:"core.weaving.title",defaults:"Weaving Issues"},r=m,l=(0,E.Z)(r.prototype,"castTime",[H.I,a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.castTime}}),c=(0,E.Z)(r.prototype,"data",[H.I,n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.data}}),d=(0,E.Z)(r.prototype,"invulnerability",[H.I,s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.invulnerability}}),u=(0,E.Z)(r.prototype,"suggestions",[H.I,o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.suggestions}}),r)},37727:function(e,t,i){i.r(t),i.d(t,{default:function(){return Ue}});var a=i(97530),n=i(23257),s=i(68420),o=i(27344),r=i(5281),l=i(90306),c=i(50596),d=i(300),u=i(77766),h=i.n(u),m=i(39392),v=i.n(m),f=i(2991),p=i.n(f),g=i(20116),I=i.n(g),A=i(86359),w=i(9263),y=i(28683),E=i(74489),C=i(76704),Z=i(73947),T=i(56611),x=i(3085),R=i(67294),S=i(65927),N=i(80967),k=i(87462),O=i(86010),b=(i(45697),i(98459)),j=i(28935),G=i(12519),H=i(15545);function _(e){var t=e.children,i=e.className,a=e.computer,n=e.color,s=e.floated,o=e.largeScreen,r=e.mobile,l=e.only,c=e.stretched,d=e.tablet,u=e.textAlign,h=e.verticalAlign,m=e.widescreen,v=e.width,f=(0,O.Z)(n,(0,b.lG)(c,"stretched"),(0,b.MR)(l,"only"),(0,b.X4)(u),(0,b.cD)(s,"floated"),(0,b.Ok)(h),(0,b.H0)(a,"wide computer"),(0,b.H0)(o,"wide large screen"),(0,b.H0)(r,"wide mobile"),(0,b.H0)(d,"wide tablet"),(0,b.H0)(m,"wide widescreen"),(0,b.H0)(v,"wide"),"column",i),p=(0,j.Z)(_,e),g=(0,G.Z)(_,e);return R.createElement(g,(0,k.Z)({},p,{className:f}),t)}_.handledProps=["as","children","className","color","computer","floated","largeScreen","mobile","only","stretched","tablet","textAlign","verticalAlign","widescreen","width"],_.propTypes={},_.create=(0,H.u5)(_,(function(e){return{children:e}}));var D=_;function P(e){var t=e.centered,i=e.children,a=e.className,n=e.color,s=e.columns,o=e.divided,r=e.only,l=e.reversed,c=e.stretched,d=e.textAlign,u=e.verticalAlign,h=(0,O.Z)(n,(0,b.lG)(t,"centered"),(0,b.lG)(o,"divided"),(0,b.lG)(c,"stretched"),(0,b.MR)(r,"only"),(0,b.MR)(l,"reversed"),(0,b.X4)(d),(0,b.Ok)(u),(0,b.H0)(s,"column",!0),"row",a),m=(0,j.Z)(P,e),v=(0,G.Z)(P,e);return R.createElement(v,(0,k.Z)({},m,{className:h}),i)}P.handledProps=["as","centered","children","className","color","columns","divided","only","reversed","stretched","textAlign","verticalAlign"],P.propTypes={};var L=P;function U(e){var t=e.celled,i=e.centered,a=e.children,n=e.className,s=e.columns,o=e.container,r=e.divided,l=e.doubling,c=e.inverted,d=e.padded,u=e.relaxed,h=e.reversed,m=e.stackable,v=e.stretched,f=e.textAlign,p=e.verticalAlign,g=(0,O.Z)("ui",(0,b.lG)(i,"centered"),(0,b.lG)(o,"container"),(0,b.lG)(l,"doubling"),(0,b.lG)(c,"inverted"),(0,b.lG)(m,"stackable"),(0,b.lG)(v,"stretched"),(0,b.sU)(t,"celled"),(0,b.sU)(r,"divided"),(0,b.sU)(d,"padded"),(0,b.sU)(u,"relaxed"),(0,b.MR)(h,"reversed"),(0,b.X4)(f),(0,b.Ok)(p),(0,b.H0)(s,"column",!0),"grid",n),I=(0,j.Z)(U,e),A=(0,G.Z)(U,e);return R.createElement(A,(0,k.Z)({},I,{className:g}),a)}U.handledProps=["as","celled","centered","children","className","columns","container","divided","doubling","inverted","padded","relaxed","reversed","stackable","stretched","textAlign","verticalAlign"],U.Column=D,U.Row=L,U.propTypes={};var W,M,B,F,Y,X,z,q,V,J,K,Q,$,ee,te,ie,ae,ne,se,oe=U,re=i(85893),le=(W=Reflect.metadata("design:type",Z.V),M=Reflect.metadata("design:type",T.TY),B=Reflect.metadata("design:type",x.b),V=q=function(e){(0,l.Z)(i,e);var t=(0,c.Z)(i);function i(){var e,a;(0,s.Z)(this,i);for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];return(a=t.call.apply(t,h()(e=[this]).call(e,l))).recitationActive=!1,a.aetherflowWindows=[],a.aetherflowCumulativeDrift=0,a.dissipationCumulativeDrift=0,a.totalAetherflowConsumeActions=0,a.totalCastsByConsumeAction=new(v()),(0,n.Z)(a,"data",Y,(0,r.Z)(a)),(0,n.Z)(a,"timeline",X,(0,r.Z)(a)),(0,n.Z)(a,"unableToAct",z,(0,r.Z)(a)),a.AETHERFLOW_GENERATE_ACTIONS=[a.data.actions.AETHERFLOW.id,a.data.actions.DISSIPATION.id],a.AETHERFLOW_CONSUME_ACTIONS=[a.data.actions.LUSTRATE.id,a.data.actions.EXCOGITATION.id,a.data.actions.INDOMITABILITY.id,a.data.actions.SACRED_SOIL.id,a.data.actions.SCH_ENERGY_DRAIN.id],a.RECITATION_ACTIONS=[a.data.actions.EXCOGITATION.id,a.data.actions.INDOMITABILITY.id,a.data.actions.ADLOQUIUM.id,a.data.actions.SUCCOR.id],a.AETHERFLOW_CHARGES_PER_CAST=3,a.AETHERFLOW_TIMELINE_START_PADDING=5e3,a.AETHERFLOW_TIMELINE_END_PADDING=65e3,a.UNABLE_TO_ACT_BUFFER=7500,a}return(0,o.Z)(i,[{key:"initialise",value:function(){var e=(0,E.hX)().type("action").source(this.parser.actor.id).action((0,E.kw)(this.AETHERFLOW_GENERATE_ACTIONS)),t=(0,E.hX)().type("action").source(this.parser.actor.id).action((0,E.kw)(this.AETHERFLOW_CONSUME_ACTIONS)),i=(0,E.hX)().source(this.parser.actor.id).status(this.data.statuses.RECITATION.id);this.addEventHook(e,this.onGenerateAetherflow),this.addEventHook(t,this.onConsumeAetherflow),this.addEventHook(i.type("statusApply"),this.recitationApplied),this.addEventHook(i.type("statusRemove"),this.recitationRemoved),this.addEventHook({type:"death",actor:this.parser.actor.id},this.recitationRemoved),this.addEventHook("complete",this.onComplete)}},{key:"output",value:function(){var e,t,i,n,s,o,r,l,c=this;return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsxs)(S.Z,{children:[(0,re.jsx)(S.Z.Header,{children:(0,re.jsx)(S.Z.Row,{children:(0,re.jsx)(S.Z.HeaderCell,{colSpan:"6",children:(0,re.jsx)(A.Trans,{id:"sch.aetherflow.summary",defaults:"Summary"})})})}),(0,re.jsx)(S.Z.Body,{children:(0,re.jsxs)(S.Z.Row,{children:[(0,re.jsx)(S.Z.Cell,{textAlign:"right",children:(0,re.jsx)(A.Trans,{id:"sch.aetherflow.total-aetherflow-drift",defaults:"Total Aetherflow Drift"})}),(0,re.jsx)(S.Z.Cell,{children:this.parser.formatDuration(null!==(e=this.aetherflowCumulativeDrift)&&void 0!==e?e:0)}),(0,re.jsx)(S.Z.Cell,{textAlign:"right",children:(0,re.jsx)(A.Trans,{id:"sch.aetherflow.total-dissipation-drift",defaults:"Total Dissipation Drift"})}),(0,re.jsx)(S.Z.Cell,{children:this.parser.formatDuration(null!==(t=this.dissipationCumulativeDrift)&&void 0!==t?t:0)}),(0,re.jsx)(S.Z.Cell,{textAlign:"right",children:(0,re.jsx)(A.Trans,{id:"sch.aetherflow.total-wasted-stacks",defaults:"Total Wasted Stacks"})}),(0,re.jsx)(S.Z.Cell,{children:this.aetherflowWindows.length*this.AETHERFLOW_CHARGES_PER_CAST-this.totalAetherflowConsumeActions})]})}),(0,re.jsx)(S.Z.Header,{children:(0,re.jsx)(S.Z.Row,{children:(0,re.jsx)(S.Z.HeaderCell,{colSpan:"6",children:(0,re.jsx)(A.Trans,{id:"sch.aetherflow.abilities-used",defaults:"Abilities Used"})})})}),(0,re.jsxs)(S.Z.Body,{children:[(0,re.jsxs)(S.Z.Row,{children:[(0,re.jsx)(S.Z.Cell,{textAlign:"right",children:(0,re.jsx)(w.vm,(0,a.Z)({},this.data.actions.LUSTRATE))}),(0,re.jsx)(S.Z.Cell,{children:null!==(i=this.totalCastsByConsumeAction.get(this.data.actions.LUSTRATE.id))&&void 0!==i?i:0}),(0,re.jsx)(S.Z.Cell,{textAlign:"right",children:(0,re.jsx)(w.vm,(0,a.Z)({},this.data.actions.EXCOGITATION))}),(0,re.jsx)(S.Z.Cell,{children:null!==(n=this.totalCastsByConsumeAction.get(this.data.actions.EXCOGITATION.id))&&void 0!==n?n:0}),(0,re.jsx)(S.Z.Cell,{textAlign:"right",children:(0,re.jsx)(w.vm,(0,a.Z)({},this.data.actions.INDOMITABILITY))}),(0,re.jsx)(S.Z.Cell,{children:null!==(s=this.totalCastsByConsumeAction.get(this.data.actions.INDOMITABILITY.id))&&void 0!==s?s:0})]}),(0,re.jsxs)(S.Z.Row,{children:[(0,re.jsx)(S.Z.Cell,{textAlign:"right",children:(0,re.jsx)(w.vm,(0,a.Z)({},this.data.actions.SACRED_SOIL))}),(0,re.jsx)(S.Z.Cell,{children:null!==(o=this.totalCastsByConsumeAction.get(this.data.actions.SACRED_SOIL.id))&&void 0!==o?o:0}),(0,re.jsx)(S.Z.Cell,{textAlign:"right",children:(0,re.jsx)(w.vm,(0,a.Z)({},this.data.actions.SCH_ENERGY_DRAIN))}),(0,re.jsx)(S.Z.Cell,{colSpan:"3",children:null!==(r=this.totalCastsByConsumeAction.get(this.data.actions.SCH_ENERGY_DRAIN.id))&&void 0!==r?r:0})]}),(0,re.jsx)(S.Z.Row,{})]})]}),(0,re.jsxs)(S.Z,{children:[(0,re.jsx)(S.Z.Header,{children:(0,re.jsxs)(S.Z.Row,{children:[(0,re.jsx)(S.Z.HeaderCell,{children:(0,re.jsx)(A.Trans,{id:"sch.aetherflow.cast",defaults:"Cast"})}),(0,re.jsx)(S.Z.HeaderCell,{children:(0,re.jsx)(A.Trans,{id:"sch.aetherflow.cast-time",defaults:"Cast Time"})}),(0,re.jsx)(S.Z.HeaderCell,{children:(0,re.jsx)(A.Trans,{id:"sch.aetherflow.drift",defaults:"Drift"})}),(0,re.jsx)(S.Z.HeaderCell,{children:(0,re.jsx)(A.Trans,{id:"sch.aetherflow.abilities-used",defaults:"Abilities Used"})}),(0,re.jsx)(S.Z.HeaderCell,{children:(0,re.jsx)(A.Trans,{id:"sch.aetherflow.wasted-stacks",defaults:"Wasted Stacks"})})]})}),(0,re.jsx)(S.Z.Body,{children:p()(l=this.aetherflowWindows).call(l,(function(e){var t;return(0,re.jsxs)(S.Z.Row,{children:[(0,re.jsx)(S.Z.Cell,{children:(0,re.jsx)(w.vm,(0,a.Z)({},c.data.getAction(e.aetherflowGenerateActionId)))}),(0,re.jsxs)(S.Z.Cell,{children:[(0,re.jsx)(N.Z,{circular:!0,compact:!0,size:"mini",icon:"time",onClick:function(){return c.scrollToAetherflowTimeline(e.timestamp)}}),c.parser.formatEpochTimestamp(e.timestamp)]}),(0,re.jsx)(S.Z.Cell,{children:e.drift>0&&c.parser.formatDuration(e.drift)}),(0,re.jsx)(S.Z.Cell,{children:(0,re.jsx)(oe,{children:p()(t=e.aetherflowConsumeActions).call(t,(function(t,i){return(0,re.jsxs)(oe.Column,{width:5,children:[(0,re.jsx)(oe.Row,{children:(0,re.jsx)(w.vm,(0,a.Z)({},c.data.getAction(t.actionId)))}),(0,re.jsxs)(oe.Row,{children:[(0,re.jsx)(N.Z,{circular:!0,compact:!0,size:"mini",icon:"time",onClick:function(){return c.scrollToAetherflowTimeline(e.timestamp)}}),c.parser.formatEpochTimestamp(t.timestamp)]})]},i)}))})}),(0,re.jsx)(S.Z.Cell,{children:c.AETHERFLOW_CHARGES_PER_CAST-e.aetherflowConsumeActions.length||"-"})]},e.timestamp)}))})]})]})}},{key:"onGenerateAetherflow",value:function(e){this.aetherflowWindows.push({aetherflowGenerateActionId:e.action,timestamp:e.timestamp,aetherflowConsumeActions:[],drift:0})}},{key:"onConsumeAetherflow",value:function(e){var t=this.aetherflowWindows[this.aetherflowWindows.length-1];if(t&&(!this.recitationActive||!this.RECITATION_ACTIONS.some((function(t){return t===e.action})))){var i;t.aetherflowConsumeActions.push({actionId:e.action,timestamp:e.timestamp});var a=(null!==(i=this.totalCastsByConsumeAction.get(e.action))&&void 0!==i?i:0)+1;this.totalCastsByConsumeAction.set(e.action,a),this.totalAetherflowConsumeActions++}}},{key:"recitationApplied",value:function(){this.recitationActive=!0}},{key:"recitationRemoved",value:function(){this.recitationActive=!1}},{key:"onComplete",value:function(){var e,t,i=this,a=I()(e=this.aetherflowWindows).call(e,(function(e){return e.aetherflowGenerateActionId===i.data.actions.AETHERFLOW.id}));a.forEach((function(e,t){var n=a[t-1];n?(e.drift=i.calculateDrift(n.timestamp,e.timestamp,i.data.actions.AETHERFLOW.cooldown),i.aetherflowCumulativeDrift+=e.drift):e.drift=0}));var n=I()(t=this.aetherflowWindows).call(t,(function(e){return e.aetherflowGenerateActionId===i.data.actions.DISSIPATION.id}));n.forEach((function(e,t){var a=n[t-1];return a?(e.drift=i.calculateDrift(a.timestamp,e.timestamp,i.data.actions.DISSIPATION.cooldown),i.dissipationCumulativeDrift+=e.drift):e.drift=0,e}))}},{key:"calculateDrift",value:function(e,t,i){var a=e+i;return this.unableToAct.isUnableToAct({timestamp:a})&&(a=this.unableToAct.getWindows({start:a,end:t})[0].end+this.UNABLE_TO_ACT_BUFFER),Math.max(t-a,0)}},{key:"scrollToAetherflowTimeline",value:function(e){var t=e-this.parser.pull.timestamp-this.AETHERFLOW_TIMELINE_START_PADDING,i=e-this.parser.pull.timestamp+this.AETHERFLOW_TIMELINE_END_PADDING;this.timeline.show(t,i)}}]),i}(y.qk),q.handle="aetherflow",q.title={id:"sch.aetherflow.title",defaults:"Aetherflow"},F=V,Y=(0,d.Z)(F.prototype,"data",[C.I,W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.data}}),X=(0,d.Z)(F.prototype,"timeline",[C.I,M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.timeline}}),z=(0,d.Z)(F.prototype,"unableToAct",[C.I,B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.unableToAct}}),F),ce=function(e){(0,l.Z)(i,e);var t=(0,c.Z)(i);function i(){var e,a;(0,s.Z)(this,i);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=t.call.apply(t,h()(e=[this]).call(e,o))).trackedCds=[{cooldowns:[a.data.actions.CHAIN_STRATAGEM],firstUseOffset:1e4},{cooldowns:[a.data.actions.AETHERFLOW],firstUseOffset:7500}],a}return i}(i(48945).u),de=function(e){(0,l.Z)(i,e);var t=(0,c.Z)(i);function i(){var e,a;(0,s.Z)(this,i);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=t.call.apply(t,h()(e=[this]).call(e,o))).trackedDefensives=[a.data.actions.SCH_WHISPERING_DAWN,a.data.actions.SCH_FEY_ILLUMINATION,a.data.actions.RECITATION,a.data.actions.SUMMON_SERAPH,a.data.actions.PROTRACTION,a.data.actions.EXPEDIENT],a.headerContent=(0,re.jsx)(A.Trans,{id:"sch.cooldownDowntime.defense-cd-metric",defaults:"Using your mitigation and healing cooldowns allows you to help keep the party healthy while continuing to deal damage. While you shouldn't waste these actions, you should try to plan out when to use them to maximize their utility."}),a}return i}(i(12541).O),ue=i(98229),he=i(74407),me=i(52102),ve=i(49006),fe=i(52250),pe={CLIPPING:{6e3:fe.bI.MINOR,9e3:fe.bI.MEDIUM,12e3:fe.bI.MAJOR},UPTIME:{90:me.hI.WARN,95:me.hI.SUCCESS}},ge=(J=Reflect.metadata("design:type",me.ZP),K=Reflect.metadata("design:type",fe.ZP),Q=function(e){(0,l.Z)(i,e);var t=(0,c.Z)(i);function i(){var e,a;(0,s.Z)(this,i);for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];return a=t.call.apply(t,h()(e=[this]).call(e,l)),(0,n.Z)(a,"checklist",$,(0,r.Z)(a)),(0,n.Z)(a,"suggestions",ee,(0,r.Z)(a)),a.trackedStatuses=[he.ZP.BIOLYSIS.id],a}return(0,o.Z)(i,[{key:"addChecklistRules",value:function(){var e=this;this.checklist.add(new me.dV({name:(0,re.jsx)(A.Trans,{id:"sch.dots.checklist.name",defaults:"Keep your DoT up"}),description:(0,re.jsx)(A.Trans,{id:"sch.dots.checklist.description",defaults:"As a Scholar, Biolysis is a notable portion of your damage. Aim to keep it up as much as possible, so long as you can get at least 15 seconds of uptime per application."}),displayOrder:52,tiers:pe.UPTIME,requirements:[new me.nb({name:(0,re.jsx)(A.Trans,{id:"sch.dots.checklist.requirement.bio-ii.name",defaults:"<0/> uptime",components:[(0,re.jsx)(w.P9,{action:"BIOLYSIS"})]}),percent:function(){return e.getUptimePercent(he.ZP.BIOLYSIS.id)}})]}))}},{key:"addClippingSuggestions",value:function(){var e=this.getClippingAmount(he.ZP.BIOLYSIS.id);this.suggestions.add(new fe.eg({icon:ue.ZP.BIOLYSIS.icon,content:(0,re.jsx)(A.Trans,{id:"sch.dots.suggestions.clipping.content",defaults:"Avoid refreshing Biolysis significantly before its expiration, except when at the end of the fight. Unnecessary refreshes use up your mana more than necessary, and may cause you to go out of mana."}),tiers:pe.CLIPPING,value:e,why:(0,re.jsx)(A.Trans,{id:"sch.dots.suggestions.clipping.why",defaults:"An average of {0} seconds of <0/> clipped per minute due to early refreshes.",values:{0:this.parser.formatDuration(e,1)},components:[(0,re.jsx)(w.P9,{status:"BIOLYSIS"})]})}))}}]),i}(ve.N),$=(0,d.Z)(Q.prototype,"checklist",[C.I,J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.checklist}}),ee=(0,d.Z)(Q.prototype,"suggestions",[C.I,K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.suggestions}}),Q),Ie=i(18527),Ae=i(3362),we=i(43719),ye=i(78766),Ee=i(40103),Ce={30:fe.bI.MINOR,50:fe.bI.MEDIUM,70:fe.bI.MAJOR},Ze=["SCH_ENERGY_DRAIN","LUSTRATE","INDOMITABILITY","SACRED_SOIL","EXCOGITATION"],Te=["SUMMON_EOS","SUMMON_SELENE"],xe=(te=Reflect.metadata("design:type",fe.ZP),se=ne=function(e){(0,l.Z)(i,e);var t=(0,c.Z)(i);function i(){var e,a,o,l;(0,s.Z)(this,i);for(var c=arguments.length,d=new Array(c),u=0;u<c;u++)d[u]=arguments[u];return l=t.call.apply(t,h()(e=[this]).call(e,d)),(0,n.Z)(l,"suggestions",ae,(0,r.Z)(l)),l.gauge=l.add(new ye.qT({chart:{label:"Faerie Gauge",color:we.W.SCHOLAR.colour}})),l.fairyOut=!1,l.actorPets=p()(a=I()(o=l.parser.pull.actors).call(o,(function(e){return null!=e.owner&&e.owner.id===l.parser.actor.id}))).call(a,(function(e){return e.id})),l.petHook=void 0,l}return(0,o.Z)(i,[{key:"initialise",value:function(){var e=this;(0,Ie.Z)((0,Ae.Z)(i.prototype),"initialise",this).call(this);var t=(0,E.hX)().source(this.parser.actor.id);this.addEventHook(t.type("action").action(this.data.matchActionId(Te)),this.onSummon),this.petHook=this.addEventHook((0,E.hX)().source((0,E.kw)(this.actorPets)),this.onSummon),this.addEventHook((0,E.hX)().type("heal").source((0,E.kw)(this.actorPets)).cause(this.data.matchCauseStatus(["FEY_UNION"])),this.onGaugeSpend),this.addEventHook(t.type("action").action(this.data.matchActionId(Ze)),this.onGaugeGenerate),this.addEventHook("death",(function(){return e.fairyOut=!1})),this.addEventHook(t.type("statusApply").status(this.data.statuses.DISSIPATION.id),(function(){return e.fairyOut=!1})),this.addEventHook(t.type("statusRemove").status(this.data.statuses.DISSIPATION.id),(function(){return e.fairyOut=!0})),this.addEventHook("complete",this.onComplete)}},{key:"onSummon",value:function(){this.fairyOut=!0,null!=this.petHook&&this.removeEventHook(this.petHook)}},{key:"onGaugeSpend",value:function(){this.gauge.spend(10)}},{key:"onGaugeGenerate",value:function(){this.fairyOut&&this.gauge.generate(10)}},{key:"onComplete",value:function(){this.suggestions.add(new fe.eg({icon:this.data.actions.SUMMON_SERAPH.icon,content:(0,re.jsx)(A.Trans,{id:"sch.faeriegauge.overcap.content",defaults:"Use <0/> when your Faerie Gauge is high to spend gauge and avoid using Aetherflow abilities when your Faerie Gauge is full.",components:[(0,re.jsx)(w.P9,{action:"FEY_UNION"})]}),tiers:Ce,value:this.gauge.overCap,why:(0,re.jsx)(A.Trans,{id:"sch.faeriegauge.overcap.why",defaults:"You lost a total of {0} Faerie Gauge over the course of the fight due to overcapping.",values:{0:this.gauge.overCap}})}))}}]),i}(Ee.a),ne.handle="faeriegauge",ne.title={id:"sch.gauge.title",defaults:"Faerie Gauge Usage"},ie=se,ae=(0,d.Z)(ie.prototype,"suggestions",[C.I,te],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.suggestions}}),ie),Re=function(e){(0,l.Z)(i,e);var t=(0,c.Z)(i);function i(){var e,a;(0,s.Z)(this,i);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=t.call.apply(t,h()(e=[this]).call(e,o))).suggestionContent=(0,re.jsx)(A.Trans,{id:"sch.interrupts.suggestion.content",defaults:"If you can, try to preposition yourself so you don't have to move during mechanics as much as possible. Utilizing slidecasting will lower the need to use <0/> to instantly relocate or interrupt your current <1/> cast.",components:[(0,re.jsx)(w.P9,{action:"SCH_RUIN_II"}),(0,re.jsx)(w.P9,{action:"BROIL_IV"})]}),a}return i}(i(48989).e),Se=i(26823),Ne=function(e){(0,l.Z)(i,e);var t=(0,c.Z)(i);function i(){var e,a;(0,s.Z)(this,i);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=t.call.apply(t,h()(e=[this]).call(e,o))).checklistRuleBreakout=!0,a.displayPieChart=!0,a.displaySuggestion=!0,a.trackedHealCategories=[{name:(0,re.jsx)(A.Trans,{id:"sch.overheal.hot.name",defaults:"Sacred Soil"}),color:Se.Av[1],trackedHealIds:[he.ZP.SACRED_SOIL.id]},{name:(0,re.jsx)(A.Trans,{id:"sch.overheal.pet.name",defaults:"Fairy"}),color:Se.Av[2],trackedHealIds:[ue.ZP.FEY_BLESSING.id,ue.ZP.CONSOLATION.id,ue.ZP.EMBRACE.id,ue.ZP.SERAPHIC_VEIL.id]},{name:(0,re.jsx)(A.Trans,{id:"sch.overheal.pethot.name",defaults:"Fairy HoTs"}),color:Se.Av[3],trackedHealIds:[he.ZP.WHISPERING_DAWN.id,he.ZP.ANGELS_WHISPER.id,he.ZP.FEY_UNION.id]}],a}return i}(Se.Bv);Ne.handle="overheal";var ke=i(78580),Oe=i.n(ke),be=i(17982),je=["WHISPERING_DAWN","FEY_ILLUMINATION","FEY_BLESSING","CONSOLATION","ANGELS_WHISPER","FEY_UNION","SERAPHIC_ILLUMINATION"],Ge=function(e){(0,l.Z)(i,e);var t=(0,c.Z)(i);function i(){var e,a;(0,s.Z)(this,i);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=t.call.apply(t,h()(e=[this]).call(e,o))).canPetBeCommanded=!0,a.petActionIds=p()(je).call(je,(function(e){return a.data.actions[e].id})),a}return(0,o.Z)(i,[{key:"isCommandedEvent",value:function(e){var t;return Oe()(t=this.petActionIds).call(t,e.action)}}]),i}(be.k);Ge.handle="schfaerietimeline";var He=function(e){(0,l.Z)(i,e);var t=(0,c.Z)(i);function i(){var e,n;(0,s.Z)(this,i);for(var o=arguments.length,r=new Array(o),l=0;l<o;l++)r[l]=arguments[l];return(n=t.call.apply(t,h()(e=[this]).call(e,r))).suggestionContent=(0,re.jsx)(A.Trans,{id:"sch.swiftcast.missed.suggestion.content",defaults:"Use spells with <0/> before it expires. This allows you to use spells with cast times instantly, such as <1/> for a quick revive, or <2/> for weaving.",components:[(0,re.jsx)(w.vm,(0,a.Z)({},ue.ZP.SWIFTCAST)),(0,re.jsx)(w.vm,(0,a.Z)({},ue.ZP.RESURRECTION)),(0,re.jsx)(w.vm,(0,a.Z)({},ue.ZP.BROIL_III))]}),n}return i}(i(48523).t),_e=function(e){(0,l.Z)(i,e);var t=(0,c.Z)(i);function i(){var e,a;(0,s.Z)(this,i);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=t.call.apply(t,h()(e=[this]).call(e,o))).buffAction=ue.ZP.INFUSION_MIND,a}return i}(i(90137).J),De=i(45715),Pe={1:fe.bI.MINOR,5:fe.bI.MEDIUM,10:fe.bI.MAJOR},Le=function(e){(0,l.Z)(i,e);var t=(0,c.Z)(i);function i(){var e,a;(0,s.Z)(this,i);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=t.call.apply(t,h()(e=[this]).call(e,o))).suggestionContent=(0,re.jsx)(A.Trans,{id:"sch.weaving.content",defaults:"Try to use <0/>, <1/>, or <2/> to weave your actions, and avoid weaving more actions than you have time for in a single GCD window. Doing so will delay your next GCD, reducing possible uptime. Check the {0} module below for more detailed analysis.",values:{0:a.moduleLink},components:[(0,re.jsx)(w.P9,{action:"BROIL_IV"}),(0,re.jsx)(w.P9,{action:"SCH_RUIN_II"}),(0,re.jsx)(w.P9,{action:"BIOLYSIS"})]}),a.severity=Pe,a}return i}(De.x);Le.displayOrder=54;var Ue=[le,ce,de,ge,Re,xe,Ne,Ge,He,_e,Le]}}]);
//# sourceMappingURL=jobs-sch.d636d3a9.js.map